# E2E Testing Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Developer/CI System                              â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  $ ./scripts/run_e2e_tests.sh                                    â”‚   â”‚
â”‚  â”‚  ğŸš€ Starting E2E Integration Tests...                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Docker Compose Orchestration                         â”‚
â”‚                    (docker-compose.e2e.yml)                              â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  PostgreSQL  â”‚  â”‚    Redis     â”‚  â”‚  Backend API â”‚  â”‚   Celery   â”‚ â”‚
â”‚  â”‚  (port 5433) â”‚  â”‚  (port 6380) â”‚  â”‚  (port 8000) â”‚  â”‚   Worker   â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚            â”‚ â”‚
â”‚  â”‚  Test DB     â”‚  â”‚  Cache +     â”‚  â”‚  FastAPI     â”‚  â”‚  Backgroundâ”‚ â”‚
â”‚  â”‚  keneyapp_   â”‚  â”‚  Celery      â”‚  â”‚  with all    â”‚  â”‚  Tasks     â”‚ â”‚
â”‚  â”‚  test        â”‚  â”‚  Backend     â”‚  â”‚  routers     â”‚  â”‚            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                 â”‚                 â”‚                 â”‚        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                   â”‚                                     â”‚
â”‚                          e2e_test_network                               â”‚
â”‚                                   â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              E2E Test Runner Container                            â”‚ â”‚
â”‚  â”‚              (Dockerfile.e2e)                                     â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚  pytest tests/test_e2e_integration.py --junitxml=...             â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚         Test Execution Flow                                 â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  1. Health Checks                                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ GET /                                                â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ GET /health                                          â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â””â”€ GET /docs                                            â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  2. Authentication (5 roles)                                â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ POST /api/v1/auth/login (Super Admin)               â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ POST /api/v1/auth/login (Admin)                     â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ POST /api/v1/auth/login (Doctor)                    â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ POST /api/v1/auth/login (Nurse)                     â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â””â”€ POST /api/v1/auth/login (Receptionist)              â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  3. Patient Workflows                                       â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ POST /api/v1/patients (Create with encryption)      â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ GET /api/v1/patients (List with pagination)         â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ GET /api/v1/patients/{id} (Detail)                  â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ PUT /api/v1/patients/{id} (Update + invalidate cache)â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â””â”€ DELETE /api/v1/patients/{id} (Soft delete)          â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  4. RBAC Enforcement                                        â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ Admin: Full CRUD âœ“                                  â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ Doctor: Read-only âœ“                                 â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ Nurse: Forbidden âœ—                                  â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â””â”€ Receptionist: Forbidden âœ—                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  5. Cache Validation                                        â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ Cache warming                                        â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â”œâ”€ Cache hit performance (<50ms)                        â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â””â”€ Cache invalidation on update                         â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  6. GraphQL API                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â””â”€ POST /graphql (patient list query)                  â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  7. Metrics & Monitoring                                    â”‚â”‚ â”‚
â”‚  â”‚  â”‚     â””â”€ GET /metrics (Prometheus)                            â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚         E2ETestLogger                                       â”‚â”‚ â”‚
â”‚  â”‚  â”‚         (Structured Logging)                                â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Test start/end timestamps                               â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Duration tracking                                        â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Performance metrics collection                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Error capture with tracebacks                            â”‚â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ JSON export                                              â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Test Artifacts (Host)                            â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  logs/                                                       â”‚        â”‚
â”‚  â”‚  â”œâ”€ e2e_integration_results.json  â† Machine-readable        â”‚        â”‚
â”‚  â”‚  â”œâ”€ e2e_integration_test.log      â† Detailed execution      â”‚        â”‚
â”‚  â”‚  â””â”€ e2e_analysis_report.txt       â† Human-readable          â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  test_results/                                               â”‚        â”‚
â”‚  â”‚  â””â”€ e2e_results.xml                â† JUnit XML (CI)         â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Python Analyzer                                    â”‚
â”‚                (scripts/analyze_e2e_results.py)                          â”‚
â”‚                                                                           â”‚
â”‚  class E2EResultsAnalyzer:                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚    â”‚  1. Load JSON results                                     â”‚         â”‚
â”‚    â”‚  2. Generate summary (pass/fail rates, duration)          â”‚         â”‚
â”‚    â”‚  3. Analyze performance (slow operations, benchmarks)     â”‚         â”‚
â”‚    â”‚  4. Investigate failures (errors, tracebacks)             â”‚         â”‚
â”‚    â”‚  5. Provide recommendations (optimization, fixes)         â”‚         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                           â”‚
â”‚  Output:                                                                 â”‚
â”‚    â€¢ Console report with colored output                                 â”‚
â”‚    â€¢ logs/e2e_analysis_report.txt                                       â”‚
â”‚    â€¢ Exit code (0=success, 1=failures)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Terminal Output                                 â”‚
â”‚                                                                           â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—     â”‚
â”‚  â•‘   âœ… E2E Integration Tests: PASSED                            â•‘     â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚                                                                           â”‚
â”‚  ğŸ“‹ Test Run Information                                                 â”‚
â”‚    Run ID:       e2e_20240101_120000                                     â”‚
â”‚    Duration:     120.5s                                                  â”‚
â”‚                                                                           â”‚
â”‚  ğŸ“Š Test Summary                                                         â”‚
â”‚    Total Tests:  20                                                      â”‚
â”‚    âœ… Passed:     20                                                     â”‚
â”‚    âŒ Failed:     0                                                      â”‚
â”‚    Pass Rate:    100.0%                                                  â”‚
â”‚                                                                           â”‚
â”‚  âš¡ Performance Analysis                                                 â”‚
â”‚    Authentication:     150ms  âœ“                                          â”‚
â”‚    Patient Create:     250ms  âœ“                                          â”‚
â”‚    Patient List:       180ms  âœ“                                          â”‚
â”‚    Cache Hit:          35ms   âœ“ Excellent                                â”‚
â”‚    GraphQL Query:      190ms  âœ“                                          â”‚
â”‚                                                                           â”‚
â”‚  ğŸ’¡ Recommendations                                                      â”‚
â”‚    âœ… All tests passing. Excellent!                                     â”‚
â”‚    âœ… Test suite execution time is excellent!                           â”‚
â”‚    âœ… No issues detected. System is performing well!                    â”‚
â”‚                                                                           â”‚
â”‚  ğŸ“„ Report saved to: logs/e2e_analysis_report.txt                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CI/CD Integration (Optional)                        â”‚
â”‚                                                                           â”‚
â”‚  GitHub Actions / GitLab CI / Jenkins                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  - name: Run E2E Tests                                       â”‚        â”‚
â”‚  â”‚    run: ./scripts/run_e2e_tests.sh                           â”‚        â”‚
â”‚  â”‚                                                               â”‚        â”‚
â”‚  â”‚  - name: Upload Artifacts                                    â”‚        â”‚
â”‚  â”‚    uses: actions/upload-artifact@v3                          â”‚        â”‚
â”‚  â”‚    with:                                                      â”‚        â”‚
â”‚  â”‚      path: |                                                 â”‚        â”‚
â”‚  â”‚        logs/e2e_*.json                                       â”‚        â”‚
â”‚  â”‚        test_results/e2e_results.xml                          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Test    â”‚â”€â”€â”€â”€â–¶â”‚ Backend  â”‚â”€â”€â”€â”€â–¶â”‚   Redis  â”‚     â”‚PostgreSQLâ”‚
â”‚  Runner  â”‚     â”‚   API    â”‚     â”‚  Cache   â”‚     â”‚   DB     â”‚
â”‚          â”‚â—€â”€â”€â”€â”€â”‚          â”‚â—€â”€â”€â”€â”€â”‚          â”‚     â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚                 â”‚                â”‚
     â”‚                 â”‚                 â”‚                â”‚
     â–¼                 â–¼                 â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Structured Logging (E2ETestLogger)            â”‚
â”‚  â€¢ Test execution events                                   â”‚
â”‚  â€¢ HTTP request/response details                           â”‚
â”‚  â€¢ Performance metrics (response times)                    â”‚
â”‚  â€¢ Errors with full context                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  JSON Results   â”‚
              â”‚  File Export    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Python         â”‚
              â”‚  Analyzer       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Human-Readable â”‚
              â”‚  Report         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Test Execution Timeline

```
0s    â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ğŸš€ Start Docker Environment
           â”‚
30s   â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  âœ“ Services healthy (PostgreSQL, Redis, Backend)
           â”‚  âœ“ Database seeded with test data
           â”‚
35s   â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ğŸ” Health Checks (3 tests)
           â”‚    â”œâ”€ GET / (root)
           â”‚    â”œâ”€ GET /health
           â”‚    â””â”€ GET /docs
           â”‚
40s   â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ğŸ” Authentication (5 tests)
           â”‚    â”œâ”€ Super Admin login
           â”‚    â”œâ”€ Admin login
           â”‚    â”œâ”€ Doctor login
           â”‚    â”œâ”€ Nurse login
           â”‚    â””â”€ Receptionist login
           â”‚
50s   â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ğŸ‘¤ Patient Workflows (5 tests)
           â”‚    â”œâ”€ Create patient (with PHI encryption)
           â”‚    â”œâ”€ List patients (pagination)
           â”‚    â”œâ”€ Get patient (decryption)
           â”‚    â”œâ”€ Update patient (cache invalidation)
           â”‚    â””â”€ Delete patient (soft delete)
           â”‚
80s   â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ğŸ”’ RBAC Enforcement (4 tests)
           â”‚    â”œâ”€ Admin CRUD permissions
           â”‚    â”œâ”€ Doctor read-only
           â”‚    â”œâ”€ Nurse forbidden
           â”‚    â””â”€ Receptionist forbidden
           â”‚
100s  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ğŸ’¾ Cache Validation (1 test)
           â”‚    â””â”€ Cache hit performance
           â”‚
105s  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ğŸ”— GraphQL API (1 test)
           â”‚    â””â”€ Patient list query
           â”‚
110s  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ğŸ“Š Metrics & Monitoring (1 test)
           â”‚    â””â”€ Prometheus metrics
           â”‚
120s  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  âœ… All tests complete
           â”‚  ğŸ“Š Generating analysis...
           â”‚
125s  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ğŸ“„ Report saved
           â”‚  ğŸ§¹ Cleanup prompt
           â”‚
130s  â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              âœ¨ Done!
```

## Key Features Highlighted

1. **Isolation**: Separate Docker network and ports
2. **Automation**: Single command execution
3. **Observability**: Structured logging with metrics
4. **Analysis**: Automated result interpretation
5. **CI/CD Ready**: Exit codes and artifact generation
6. **Production Parity**: Tests real-world workflows
7. **Performance Tracking**: Response time monitoring
8. **Comprehensive**: All major features validated
